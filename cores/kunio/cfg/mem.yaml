params:
  - name: PCM_OFFSET
    value: "(`PCM_START-`JTFRAME_BA1_START)>>1"
  - name: SCR_OFFSET
    value: "(`SCR_START-`JTFRAME_BA2_START)>>1"
  - name: MCU_OFFSET
    value: "'h30000"
clocks:
  clk24:
    - freq: 3000000
      gate: [ main, snd ]
      outputs:
        - cen3
        - cen1p5
sdram:
  # post_addr: true
  banks:
    - buses:
        - name: main
          addr_width: 16
          data_width: 8
    - buses:
        - name: snd
          addr_width: 15
          data_width: 8
        - name: pcm
          addr_width: 17
          data_width: 8
          offset: PCM_OFFSET
    - buses:
        - name: char
          addr_width: 15
          data_width: 32
          cs: gfx_cs
          gfx_sort: hhvvv
        - name: scr
          addr_width: 18
          data_width: 32
          cs: gfx_cs
          gfx_sort: hhvvvv
          offset: SCR_OFFSET
    - buses:
        - name: obj
          addr_width: 19
          data_width: 32
          gfx_sort: hhvvvv
        # dummy bus is a temporary hack to get gfx16_en signal correctly
        # generated by `jtframe mem`. Otherwise, it stays on while the MCU bram below
        # is loaded and messes up the data.
        - name: dummy
          addr_width: 11
          data_width: 32
          offset: MCU_OFFSET
bram:
  - name: mcu
    addr_width: 11
    data_width: 8
    sim_file: true
    rom:
      offset: "(`MCU_START)>>1"